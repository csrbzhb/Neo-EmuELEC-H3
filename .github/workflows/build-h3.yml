name: build-h3

on:
  workflow_dispatch:

jobs:
  build:

    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v4

    - name: Initialization environment
      run: |
        sudo apt -y update && sudo apt upgrade -y
        sudo apt-get -y install gcc make git unzip wget xz-utils libsdl2-dev libsdl2-mixer-dev libfreeimage-dev libfreetype6-dev libcurl4-openssl-dev rapidjson-dev libasound2-dev libgl1-mesa-dev build-essential libboost-all-dev cmake fonts-droid-fallback libvlc-dev libvlccore-dev vlc-bin texinfo premake4 golang libssl-dev curl patchelf xmlstarlet default-jre xsltproc

    - name: start make
      run: |
        cd Neo-EmuELEC-H3
        PROJECT=H3 ARCH=arm DISTRO=EmuELEC make -j4 image

